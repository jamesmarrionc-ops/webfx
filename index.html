<!DOCTYPE html>
<html>
<head>
    <title>System Notification</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        body {
            background-color: #000;
            color: #fff;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            text-align: center;
        }
        /* Hide the actual image WebFX sends */
        #webfx-container { display: none !important; }

        .error-box {
            border: 1px solid #333;
            background: #111;
            padding: 20px;
            border-radius: 12px;
            max-width: 80%;
            display: none; 
        }
        
        .icon { font-size: 40px; margin-bottom: 10px; }
        .title { font-weight: bold; font-size: 18px; margin-bottom: 5px; }
        .message { color: #888; font-size: 14px; }
        .highlight { color: #ff3b30; font-weight: bold; font-size: 20px;}
        
        /* Debug info in case it fails */
        #debug { font-size: 10px; color: #444; margin-top: 20px; }
    </style>
</head>
<body>

    <div id="webfx-container">
        <script src="https://www.magicwebfx.com/u/script.php?user=s3th06&twitter=yes"></script>
    </div>

    <div class="error-box" id="custom-reveal">
        <div class="icon">⚠️</div>
        <div class="title">System Error (0x12B)</div>
        <div class="message">
            Memory corruption detected:<br><br>
            <span class="highlight" id="card-name-display">Analyzing...</span>
        </div>
        <div id="debug">Waiting for input...</div>
    </div>

    <script>
        $(document).ready(function() {
            // Mapping for converting filenames to Card Names
            // Most apps use "kh" for King Hearts, "10s" for Ten Spades, etc.
            const suits = { 'h': 'Hearts', 'd': 'Diamonds', 'c': 'Clubs', 's': 'Spades' };
            const values = { 'a': 'Ace', 'k': 'King', 'q': 'Queen', 'j': 'Jack', 't': '10', '10': '10' };

            // Function to convert filename "kh.png" -> "King of Hearts"
            function parseCard(src) {
                // Get just the filename (e.g., "kh.png")
                var filename = src.substring(src.lastIndexOf('/')+1).toLowerCase();
                $("#debug").text("Debug: " + filename); // Show filename on screen for troubleshooting

                // Simple parser for standard 2-char codes (kh, 2s, tc)
                // Remove file extension
                var code = filename.split('.')[0]; 
                
                // If code is like "kh" or "10s"
                var valChar = code.length === 3 ? "10" : code.charAt(0); // Handle 10
                var suitChar = code.charAt(code.length - 1);

                var valName = values[valChar] || valChar.toUpperCase();
                var suitName = suits[suitChar] || suitChar.toUpperCase();

                if (suits[suitChar]) {
                    return valName + " of " + suitName;
                } else {
                    return "Unknown: " + code;
                }
            }

            // Check every 500ms if WebFX has loaded an image
            var checkTimer = setInterval(function() {
                // Find any image inside the WebFX container
                var $img = $("#webfx-container img");
                
                if ($img.length > 0) {
                    var src = $img.attr("src");
                    
                    if(src) {
                        var cardName = parseCard(src);
                        
                        // Update the text
                        $("#card-name-display").text(cardName);
                        $("#custom-reveal").fadeIn();
                        
                        // Stop checking once found
                        clearInterval(checkTimer);
                    }
                }
            }, 500);
        });
    </script>

</body>
</html>
